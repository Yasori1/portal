<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r125/three.min.js"></script>
    <script defer src="https://unpkg.com/three@0.125.2/examples/js/controls/OrbitControls.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
    <script defer src="https://unpkg.com/three@0.125.2/examples/js/loaders/GLTFLoader.js"></script>
    <script defer src="main.js"></script>
    <title>3D Scene</title>
</head>
<body>
    <canvas class="webgl"></canvas>

    <script id="firefliesVertexShader" type="x-shader/x-vertex">
        uniform float uPixelRatio;
        uniform float uSize;
        uniform float uTime;
        attribute float aScale;
        void main() {
            vec4 modelPosition = modelMatrix * vec4(position, 1.0);
            modelPosition.y += sin(uTime + modelPosition.x * 100.0) * aScale * 0.2;
            modelPosition.z += cos(uTime + modelPosition.x * 100.0) * aScale * 0.2;
            modelPosition.x += cos(uTime + modelPosition.x * 100.0) * aScale * 0.2;
            vec4 viewPosition = viewMatrix * modelPosition;
            vec4 projectionPosition = projectionMatrix * viewPosition;
            gl_Position = projectionPosition;
            gl_PointSize = uSize * aScale * uPixelRatio;
            gl_PointSize *= (1.0 / -viewPosition.z);
        }
    </script>

    <script id="firefliesFragmentShader" type="x-shader/x-fragment">
        void main() {
            gl_FragColor = vec4(1.0); // Simple fragment shader for demo purposes
        }
    </script>

    <script id="portalVertexShader" type="x-shader/x-vertex">
        void main() {
            gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
        }
    </script>

    <script id="portalFragmentShader" type="x-shader/x-fragment">
        uniform float uTime;
        uniform vec3 uColorStart;
        uniform vec3 uColorEnd;
        void main() {
            // Compute a simple animation effect
            float time = mod(uTime / 60.0, 1.0);
            vec3 color = mix(uColorStart, uColorEnd, time);
            gl_FragColor = vec4(color, 1.0);
        }
    </script>
</body>
</html>
